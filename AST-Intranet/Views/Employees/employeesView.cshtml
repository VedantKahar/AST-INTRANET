@{
    Layout = null;
    ViewBag.Title = "Department List";
    ViewBag.Title = "Employee Information";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employees</title>
    <link rel="stylesheet" href="@Url.Content("~/Content/css/EmployeesStyles.css")">

    <!-- Include Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


</head>
<body>
    <div class="sidebar" id="sidebar">
        <h2>
            <img src="~/Images/icons/menu.png" alt="Toggle Sidebar" id="toggleSidebar">
            <span>Advanced Sys-Tek</span>
        </h2>

        <hr>
        <a href="@Url.Action("dashboardView", "Dashboard")">
            <img src="~/Images/icons/dashboard-icon.png" alt="Dashboard Icon"> <span>Dashboard</span>
        </a>
        <a href="@Url.Action("EmployeesView", "Employees")">
            <img src="~/Images/icons/employees-icon.png" alt="Employees Icon"> <span>Employees</span>
        </a>
        <a href="@Url.Action("updatesView", "Updates")">
            <img src="~/Images/icons/today-icon.png" alt="Updates Icon"> <span>Today's Updates</span>
        </a>
        <a href="@Url.Action("TownhallView", "Townhall")">
            <img src="~/Images/icons/meeting-icon.png" alt="Meeting Icon"> <span>Town Hall</span>
        </a>
        <a href="@Url.Action("ResourcesView", "Resources")">
            <img src="~/Images/icons/resources-icon.png" alt="Resources Icon"> <span>Resources</span>
        </a>
        <a href="@Url.Action("manualsView", "Manuals")">
            <img src="~/Images/icons/manual-icon.png" alt="Manual Icon"> <span>Manuals</span>
        </a>
        <a href="@Url.Action("AchievementsView", "Achievements")">
            <img src="~/Images/icons/achievements-icon.png" alt="Achievements Icon"> <span>Achievements</span>
        </a>
        <a href="@Url.Action("policiesView", "Policies")">
            <img src="~/Images/icons/policies-icon.png" alt="Policies Icon"> <span>Policies</span>
        </a>
        <a href="@Url.Action("EventsView", "Events")">
            <img src="~/Images/icons/events-icon.png" alt="Events Icon"> <span>Events</span>
        </a>
        <a href="@Url.Action("LoginView", "Accounts")">
            <img src="~/Images/icons/logout-icon.png" alt="Log Out Icon"> <span>Log Out</span>
        </a>
    </div>

    <div class="main-content">
        <div class="header">
            <img src="~/Images/images/AST Logo.png" alt="AST logo">
            <input type="text" placeholder="Search anything...">

            <!-- Profile container -->
            <div class="profile-container">
                <img src="~/Images/profile-pic.jfif" alt="Profile Picture" class="profile-img">
                <span class="user-name">q</span>
            </div>
        </div>

        <div class="container">
            <!-- Graph Container Below Header -->
            <div class="chart-container">
                <canvas id="employeeChart"></canvas>
            </div>

            <!-- Dropdown for selecting graph type and year range -->
            <div class="graph-toggle-year">
                <div class="graph-toggle">
                    <label for="graphType" class="tooltip" data-tooltip="Select graph to view either gender distribution or employees per department.">
                        Select Graph:
                    </label>
                    <select id="graphType">
                        <option value="department">Employees per Department</option>
                        <option value="gender">Male/Female Distribution</option>
                    </select>
                </div>

                <!-- HTML for Year Selection -->
                <div class="year-selector">
                    <label for="startYear">Start Year:</label>
                    <select id="startYear"></select>

                    <label for="endYear">End Year:</label>
                    <select id="endYear"></select>
                </div>
            </div>
        </div>

        <hr />
        <br />

        <div class="employee-count-box">
            <div>
                <h3>Total Employees</h3>
                <p>@ViewBag.TotalEmployees</p>
            </div>
            <div>
                <h3>New Joiners</h3>
                <p>@ViewBag.NewJoiners</p>
            </div>
            <div>
                <h3>Departments</h3>
                <p>@ViewBag.TotalDepartments</p>
            </div>
        </div>
        <!-- Display Departments -->
        <div class="department-container">
            @if (ViewBag.Departments != null)
            {
                foreach (var department in ViewBag.Departments)
                {
                    <div class="department">
                        <!-- Link to GetEmployeesByDepartment action with department name -->
                        <a href="@Url.Action("GetEmployeesByDepartment", "Employees", new { departmentName = department })">
                            <h3>@department</h3>
                            <hr />
                            <p>Short description of the @department department.</p>
                        </a>
                    </div>
               }
            }
                else
                {
                    <p>No departments available.</p>            }
        </div>

        <!-- Employee list will be loaded here -->
        <div id="employee-list">
            <!-- Employee details will be dynamically loaded here -->
        </div>

     </div>

    <footer class="footer">
        &copy; 2024 Advanced Sys-Tek Limited | Contact Us | Feedback
    </footer>

    <!-- Link to the JavaScript file -->
    <script src="@Url.Content("~/Scripts/script/EmployeesScript.js")"></script>
</body>
</html>
